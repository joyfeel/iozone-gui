!function e(t,o,n){function i(l,s){if(!o[l]){if(!t[l]){var c="function"==typeof require&&require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+l+"'")}var a=o[l]={exports:{}};t[l][0].call(a.exports,function(e){var o=t[l][1][e];return i(o?o:e)},a,a.exports,e,t,o,n)}return o[l].exports}for(var r="function"==typeof require&&require,l=0;l<n.length;l++)i(n[l]);return i}({1:[function(e,t,o){"use strict";var n=n||{},i=function(e){return _.template($("#"+e).html())};n.IozoneInput=Backbone.Model.extend({url:function(){return"http://10.5.48.1:3000/iozone-input"+(null===this.id?"":"/"+this.id)},id:null,defaults:{devicename:"",emmcID:"",flashID:"",devices:[],reportname:"",description:"Test",testmode:"",filesize:"",recordsize:"",data:[],success:!1,errfor:{}}}),n.IozoneReport=Backbone.Model.extend({urlRoot:"",id:null,defaults:{reportID:"",devicename:"",reportname:"",description:"",testmodetext:"",filesize:"",recordsize:"",measuredata:[]}}),n.IozoneReportCollection=Backbone.Collection.extend({url:function(){return"http://10.5.48.1:3000/iozone-report"+(null===this.id?"":"/"+this.id)},id:null,model:n.IozoneReport}),n.IozoneComparedReport=Backbone.Model.extend({url:function(){return"http://10.5.48.1:3000/iozone-compared-report"+(null===this.id?"":"/"+this.id)},id:null,defaults:{reportID:"",devicename:"",reportname:"",description:"",testmodetext:"",filesize:"",recordsize:"",measuredata:[],series:[]}}),n.IozoneComparedReportCollection=Backbone.Collection.extend({url:function(){return"http://10.5.48.1:3000/iozone-compared-report"+(null===this.id?"":"/"+this.id)},id:null,model:n.IozoneComparedReport}),n.Router=Backbone.Router.extend({routes:{about:"about","iozone-register":"iozoneRegister","iozone-input":"iozoneInput","iozone-result":"iozoneResult","iozone-result/:key":"iozoneResultSingle"},initialize:function(){this.view=null},about:function(){this._cleanUp(),this.view=new n.AboutView},iozoneRegister:function(){this._cleanUp(),this.view=new n.IozoneRegisterView},iozoneInput:function(){this._cleanUp(),this.view=new n.IozoneInputView},iozoneResult:function(){this._cleanUp(),this.view=new n.IozoneResultView({collection:{singleReportCollection:new n.IozoneReportCollection,comparedRportCollection:new n.IozoneComparedReportCollection},id:null})},iozoneResultSingle:function(e){this._cleanUp(),this.view=new n.IozoneResultView({collection:{singleReportCollection:new n.IozoneReportCollection,comparedRportCollection:new n.IozoneComparedReportCollection},id:e})},_cleanUp:function(){this.view&&this.view.remove(),this.view=null}}),n.IozoneUtilityView=Backbone.View.extend({template:i("iozone-page-utility-template"),render:function(){return this.$el.html(this.template()),this.parentView.$el.find(".compare-row").append(this.$el),this}}),n.IozoneItemView=Backbone.View.extend({events:{"click .btn-delete-report":"delete"},template:i("iozone-report-template"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this.d3LineChart(this.model.get("devicename"),this.model.get("measuredata"),this.model.get("reportname")),this.parentView.$el.find(".chart-row").append(this.$el),this},d3LineChart:function(e,t,o){this.$el.find(".myd3-line-chart").highcharts({title:{text:e,x:-20},xAxis:{categories:["4k","8k","16k","32k","64k","128k","256k","512k"]},yAxis:{title:{text:"Speed (kB/sec)"},plotLines:[{value:0,width:1,color:"#808080"}]},plotOptions:{series:{allowPointSelect:!0}},tooltip:{crosshairs:!0,formatter:function(){return"Speed for <b>"+this.x+"</b> is <b>"+this.y+"</b>"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:o,data:t}],credits:{enabled:!1},exporting:{filename:o},chart:{borderColor:"#EBBA95",borderWidth:2,polar:!0,type:"line"}})},"delete":function(e){e.preventDefault();var t=$(e.target).data("id"),o=this;swal({title:"Are you sure?",text:"You will not be able to recover this report!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){o.model.attributes.id=t,console.log(o.model),o.model.destroy({success:function(){swal("Deleted!","Your report file has been deleted.","success")},error:function(e,t,o){var n=JSON.parse(t.responseText);swal("No report!",n.errfor.info,"error")}})})}}),n.IozoneItemViewTest=Backbone.View.extend({events:{"click .btn-delete-report":"delete"},template:i("iozone-compared-report-template"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this.d3LineChart(this.model.get("reportname"),this.model.get("series")),this.parentView.$el.find(".chart-row").append(this.$el),this},d3LineChart:function(e,t){this.$el.find(".myd3-line-chart").highcharts({chart:{type:"column"},title:{text:e},xAxis:{categories:["4k","8k","16k","32k","64k","128k","256k","512k"],crosshair:!0},yAxis:{min:0,title:{text:"Speed (kB/sec)"}},tooltip:{formatter:function(){return"Speed for <b>"+this.x+"</b> is <b>"+this.point.y+"</b>"}},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:t,credits:{enabled:!1},exporting:{filename:e}})},"delete":function(e){e.preventDefault();var t=$(e.target).data("id"),o=this;swal({title:"Are you sure?",text:"You will not be able to recover this report!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){o.model.id=t,o.model.attributes.id=t,console.log(o.model),o.model.destroy({success:function(){swal("Deleted!","Your report file has been deleted.","success")},error:function(e,t,o){var n=JSON.parse(t.responseText);swal("No report!",n.errfor.info,"error")}})})}}),n.IozoneResultView=Backbone.View.extend({el:"#global-div",events:{"click .btn-compare":"compare"},template:i("iozone-result-template"),initialize:function(){var e=!1,t=!1,o=this;this.listenTo(this.collection.singleReportCollection,"update",this.render),this.listenTo(this.collection.comparedRportCollection,"update",this.render),this.collection.singleReportCollection.id=this.id,this.collection.comparedRportCollection.id=this.id,$.when(o.collection.singleReportCollection.fetch({success:function(t,o,n){console.log("When1"),e=!0},error:function(t,o,n){console.log("When2"),e=!1}}),o.collection.comparedRportCollection.fetch({success:function(e,o,n){console.log("When3"),t=!0},error:function(e,o,n){console.log("When4"),t=!1}})).done(function(){console.log("EEEEEEEE"),console.log(e),console.log(t),e&&t||swal("No report!","Just no!","error")}).fail(function(){console.log("XXXXXXXXXX"),console.log(e),console.log(t)})},showSpinner:function(){this.$el.html('<img src="../img/spinner.gif">')},render:function(){console.log("======Render times!!!==========");var e=this;if(this.$el.empty(),this.$el.html(this.template()),console.log("view id..."),console.log(this.id),null!==this.id){var t;t=new n.IozoneUtilityView({}),t.parentView=e,t.render()}return this.collection.singleReportCollection.each(function(t){var o;o=new n.IozoneItemView({model:t}),o.parentView=e,o.render()},this),this.collection.comparedRportCollection.each(function(t){var o;o=new n.IozoneItemViewTest({model:t}),o.parentView=e,o.render()},this),this},remove:function(){return this.$el.empty(),this.undelegateEvents(),this},compare:function(){var e,t,o,i,r,l,s,c=[],a=this;if(console.log("++++++"),e=this.$el.find('input[type="checkbox"]:checked').length,2>e)return swal("Compare error","You need to select at least two reports","error"),!1;for(t=this.$el.find('input[type="checkbox"]:checked.compare-checkbox'),i=this.collection.singleReportCollection.models[0].get("testmodetext"),r=this.collection.singleReportCollection.models[0].get("testmode"),o=0;e>o;o++)l=this.collection.singleReportCollection.findWhere({reportID:t[o].getAttribute("data-id")}),s={name:l.get("reportname"),data:l.get("measuredata")},c.push(s);console.log(c),swal({title:"An input!",text:"Write something interesting:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Write something"},function(e,t){return e===!1?!1:""===e?(swal.showInputError("You need to write something!"),!1):(swal("Nice!","You wrote: "+e,"success"),console.log(e),a.testmodel=new n.IozoneComparedReport,void a.testmodel.save({reportname:e,testmodetext:i,series:c},{success:function(e,t,o){console.log("ComaparedData save successfully"),console.log(a.collection.comparedRportCollection.id),a.collection.comparedRportCollection.id=a.id,a.collection.comparedRportCollection.fetch({success:function(e,t,o){console.log("success")},error:function(e,t,o){var n=JSON.parse(t.responseText);swal("No report!",n.errfor.info,"error")}})},error:function(e,t,o){console.log("ComaparedData error save")}}))})}}),n.IozoneInputView=Backbone.View.extend({el:"#global-div",events:{"click .btn-contact-save":"save"},template:i("iozone-input-template"),initialize:function(){this.model=new n.IozoneInput,this.model.bind("change:devices",this.render,this),this.model.set("reportname",moment(new Date)),this.render(),this.model.fetch()},render:function(){return this.$el.html(this.template(this.model.attributes)),this},save:function(e){e.preventDefault();var t,o,n=this,i=this.$el.find('select[name="device"] option:selected').text(),r=this.$el.find('select[name="device"]').val(),l=this.$el.find('input[name="name"]').val(),s=this.$el.find('textarea[name="description"]').val(),c=this.$el.find('select[name="testmode"] option:selected').text(),a=this.$el.find('select[name="testmode"]').val(),d=this.$el.find('select[name="filesize"]').val(),u=this.$el.find('select[name="recordsize"]').val();null!==r&&(t=JSON.parse(r).emmcID,o=JSON.parse(r).flashID),this.$el.find(".btn-contact-save").prop("disabled",!0),this.$el.find(".btn-contact-save").addClass("disabled").text("Loading..."),this.model.save({devicename:i,emmcID:t,flashID:o,reportname:l,description:s,testmodetext:c,testmode:a,filesize:d,recordsize:u},{success:function(e,t,o){console.log("Successfully save"),swal("Performance test OK!","You can view the report of performance test","success"),n.model.set("reportname",moment(new Date)),n.render()},error:function(e,t,o){var i=JSON.parse(t.responseText);console.log("Error save"),swal("Performance test fail!",i.errfor.info,"error"),n.model.set("reportname",moment(new Date)),n.render()}})},remove:function(){return this.$el.empty(),this.undelegateEvents(),this}}),n.IozoneRegister=Backbone.Model.extend({url:function(){return"http://10.5.48.1:3000/iozone-register"+(null===this.id?"":"/"+this.id)},id:null,defaults:{firmwareVersion:"",icVersion:"",factory:"",flashID:"",plant:"",flashCompany:""}}),n.IozoneRegisterView=Backbone.View.extend({el:"#global-div",events:{"click .btn-register":"register"},template:i("iozone-register-template"),initialize:function(){_.bindAll(this,"render"),this.model=new n.IozoneRegister,this.render()},render:function(){console.log("render!!!");var e,t=this,o=[["K9G8G08U0C","K9GAG08U0F","K9GBG08U0M","K9GBG08U0A","K9GBG08U0A(new)","K9GBGD8U0B","K9GCGY8S0A","K9LCG08U0A","K9LCG08U0A(new)","K9AAGD8U0A","K9ABGD8U0C","K9ACGD8U0A","K9GCGD8U0A","K9GBG08U0B"],["H27UAG8T2AT","H27UBG8T2MY","H27UBG8T2AT","H27UCG8T2M","H27UCG8T2ETRx","H27UCG8T2ETRBC"],["TH58NVG5D2FTA","TH58NVG6D2FTA","TC58NVG6D2JTA00","TC58NVG6D2JTA00(new)","TC58NVG6D2HTA00","TC58NVG6DCJTA00","TC58NVG6DCJTA00(new)","TH58TEG7DCJBA4C","TC58NVG6D2GTA00","TH58NVG8DCJTA20","TC58NVC6DDJTA00","TH58TEG7DDJBA4C","TH58TEG7DDKBA4C","TH58TEG7DDKBA4C(new)","TH58TEG8DDHTA20","TH58TEG9DDJBA89","TC58TEG6DDLTA00","TH58TEG7DDLTA00","TH58TEG8DDLTA00","TH58TFG8DFKBA4K","TC58NVG5T2HTA00","TC58NVG5T2HTA00(new)","TC58NVG7T2JTA00","TC58NVG6T2HTA00","TC58NVG6T2HTA00(new)","TH58NVG6T2HTA20","TH58TEG6T2JBA4C","TH58TEG6T2JBA4C(new A)","TH58TEG7T2JBA4C(new B)","TH58TEG8D2HTA20","TC58TEG6TCKTA00","TH58TFT0DFKBA8J","TC58TEG7TDKTA00"],["SDTNQCAMA008G","SDTNQCAMA008G(new)","SDTNQCAMA016G","SDTNQCAMA016G(new)","SDTNQCAMB032G"],["MT29F32G08CBACA","MT29F256G08CJA","MT29F256G08CJABB","MT29F128G08CFA1","MT29F128G08CFA1(new)","MT29F128G08CJA","MT29F64G08CFA","MT29F32G08CBABA","MT29F32G08AFA","MT29F16G08CBACA","MT29F32G08CBAAA","MT29F128G08CJAAA","MT29F64G08CBACA","MT29F128G08CBCAB","MICRON_M73_1","MICRON_M73_2","MT29F512G08CKCAB","MT29F64G080CBCDB"],["JS29F16G08AAME1","JS29F32G08AAME1","JS29F16B08CAME1","JS29F16B08CAME1(new)","JS29F64G08AAMF1","JS29F64G08CAMD1","JS29F64G08CAMDB"]];for(this.$el.html(this.template(this.model.toJSON())),this.$el.find("#datetimepicker").datetimepicker({viewMode:"days",format:"YYYY/MM/DD",defaultDate:new Date}),e=0;e<o[0].length;e++)this.$el.find("#foods").append($("<option>",{value:o[0][e]}).text(o[0][e]));return this.$el.find("#foodgroup").on("change",function(){for(t.$el.find("#foods").find("option").remove(),e=0;e<o[this.selectedIndex].length;e++)t.$el.find("#foods").append($("<option>",{value:o[this.selectedIndex][e]}).text(o[this.selectedIndex][e]))}),this},register:function(e){e.preventDefault();var t=this,o=this.$el.find('input[name="firmwareVersion"]').val(),n=this.$el.find('select[name="icVersion"]').val(),i=this.$el.find('select[name="factory"]').val(),r=this.$el.find('select[name="flashID"]').val(),l=this.$el.find('select[name="plant"]').val(),s=this.$el.find('select[name="flashCompany"]').val();this.$el.find(".btn-register").prop("disabled",!0),this.$el.find(".btn-register").addClass("disabled").text("Loading..."),this.model.save({firmwareVersion:o,icVersion:n,factory:i,flashID:r,plant:l,flashCompany:s},{success:function(e,o,n){console.log("Successfully register"),console.log(o.status),swal("Register device OK!","You can test performance of the device","success"),t.render()},error:function(e,o,n){swal("Register device OK!","You can test performance of the device","error"),t.render()}})},remove:function(){return this.$el.empty(),this.undelegateEvents(),this}}),n.About=Backbone.Model.extend({defaults:{title:"About",author:"joyfeel",description:"sudo mount -t ext4 /dev/mmcblk0 /mmc"}}),n.AboutView=Backbone.View.extend({el:"#global-div",template:i("about-template"),initialize:function(){_.bindAll(this,"render"),this.model=new n.About,this.model.bind("change",this.render),this.render()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},remove:function(){return this.$el.empty(),this.undelegateEvents(),this}}),$(document).ready(function(){new n.Router,$("#datetimepicker").datetimepicker(),Backbone.history.start()})},{}]},{},[1]);